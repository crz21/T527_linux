/dts-v1/;
/plugin/;

// / {
//     compatible = "allwinner,sun55i-t527";
// 	fragment@0 {
// 		target = <&spi1>;
// 		__overlay__ {
// 			#address-cells = <1>;
// 			#size-cells = <0>;
// 			status = "okay";
// 			bmi160@0 {
// 				compatible = "barco,bmi160";
// 				twi_drv_used = <1>;
// 				reg = <0>;
// 				status = "okay";
// 			};
// 		};
// 	};

// 	fragment@1 {
// 		target = <&pio>;
// 		__overlay__ {
// 			bmi160_pins_default: twi1@0 {
// 				pins = "PB4", "PB5";
// 				function = "twi1";
// 				drive-strength = <10>;
// 				bias-pull-up;
// 			};
// 		};
// 	};


// };

/ {
	compatible = "allwinner,sun55i-t527";
    fragment@0 {
        target = <&spi0>;  /* 根据实际情况修改 SPI 控制器编号 */
        __overlay__ {
            #address-cells = <1>;
            #size-cells = <0>;
            status = "okay";
            
            bmi160@0 {  /* CS 片选信号编号，通常 BMI160 使用 CS0 */
                compatible = "barco,bmi160";
                reg = <0>;  /* SPI 片选信号编号 */
                spi-max-frequency = <10000000>;  /* 10MHz，可根据需要调整 */
                
                /* SPI 模式配置 (CPOL=0, CPHA=0) */
                /* 注意：BMI160 的 SPI 模式为 mode 0 或 mode 3，根据实际硬件确定 */
                /* mode 0: cpol=0, cpha=0 (默认) */
                /* mode 3: cpol=1, cpha=1 */
                
                /* 中断配置 (如果使用中断) */
                int-gpios = <&gpio0 10 GPIO_ACTIVE_LOW>;  /* 中断引脚，根据实际情况修改 */
                
                /* FIFO 水线配置 (可选) */
                // fifo-watermark = <64>;  /* FIFO 触发阈值 */
                
                /* 唤醒延迟 (可选) */
                // wakeup-delay-ms = <10>;  /* 唤醒延迟时间 (毫秒) */
                
                status = "okay";
            };
        };
    };
};

